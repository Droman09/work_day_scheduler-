<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->

      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">09:00 am</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="09am"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>

      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">10:00 am</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="10am"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">11:00 am</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="11am"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">12:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="12pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">01:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="13pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">02:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="14pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">03:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="15pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">04:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="16pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text hour">05:00 pm</span>
          </div>
          <textarea class="form-control" aria-label="With textarea" id="17pm"></textarea>
          <button class="btn btn-primary saveButn" type="submit">Save</button>
        </div>
      </div>
    </div>
    
    </div>

    <script>
      ///current day being display at the top of the calender 
      $(document).ready(function () {
        $("#currentDay").text(moment().format('LLLL'));
        var currentHour = moment().hour();

        // get elements by ID 
        var hrNine = $("#09am");
        var hrTen = $("#10am");
        var hrElev = $("#11am");
        var hrTvel = $("#12am");
        var hrOne = $("#13pm");
        var hrTwo = $("#14pm");
        var hrThr = $("#15pm");
        var hrFour = $("#16pm");
        var hrFiv = $("#17pm");
        console.log(hrFour)

        ///reset button 
        var resetButn = $("<button>").addClass("btn btn-primary").text("Reset")
        $("header").append(resetButn)

        ///display value from local storage
        var valNine = JSON.parse(localStorage.getItem("09:00 am"));
        hrNine.val(valNine);

        var valTen = JSON.parse(localStorage.getItem("10:00 am"));
        hrTen.val(valTen);

        var valElev = JSON.parse(localStorage.getItem("11:00 am"));
        hrElev.val(valElev);

        var valTvel = JSON.parse(localStorage.getItem("12:00 pm"));
        hrTvel.val(valTvel);

        var valOne = JSON.parse(localStorage.getItem("01:00 pm"));
        hrOne.val(valOne);

        var valTwo = JSON.parse(localStorage.getItem("02:00 pm"));
        hrTwo.val(valTwo);

        var valThr = JSON.parse(localStorage.getItem("03:00 pm"));
        hrThr.val(valThr);

        var valFour = JSON.parse(localStorage.getItem("04:00 pm"));
        hrFour.val(valFour);

        var valFive = JSON.parse(localStorage.getItem("05:00 pm"));
        hrFiv.val(valFive);
        
        // create a function that would determine if the input is in the past, present or future
        function timeEras(){
          $(".form-control").each(function(){
            var time = parseInt($(this).attr("id"))
            console.log(time)

            if (time > currentHour){
              $(this).addClass("past");
            } else if (time < currentHour){
              $(this).addClass("past");
            } else {
              $(this).addClass("present");
            }
          })

        }
        timeEras()

        /// when save button click, data will be saved in local storage
        $(".saveButn").on("click", function(){
          //obtain user input 
          var userInput = $(this).siblings(".form-control").val().trim();
          // obtain slot time 
          var userTime = $(this).siblings(".input-group-prepend").text().trim();
          //set up local storage
          localStorage.setItem(userTime, JSON.stringify(userInput)); 
        })

        /// when reset button is clicked, all data would clear 
        resetButn.click(function(){
          $("id").text("");
          localStorage.clear();
        })
 })
    </script>
 
  </body>
</html>
